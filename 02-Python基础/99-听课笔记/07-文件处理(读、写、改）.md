## 三元运算  
* 三元运算又称三目运算，是对简单的条件语句的简写，如：
* 简单条件语句

```python
if 条件成立:
  val = 1
else:
  val = 2
```

* 改成三元运算：

```
val = 1 if 条件成立 else 2
```


## 文件操作
### 读
#### 1 读文件(编码已知)
* 基础语法

```python
f=open([file=]"路径+filename",[mode=]"r",encoding='文件编码')
#相对路径：直接写文件名，绝对路径：文件地址+文件名
#文件是什么编码存的，就应该用什么编码读取
```

```python
f = open(file="filename",mode="r"，encoding="utf-8") #mode:模式（只读），编码utf-8
data=f.read()
f.close()
```

#### 2 二进制模式读取
* 语法
* 原始编码未知，一般为视频、图片、进行二进制传输的文本

```python
f=open([file=]"路径+filename",[mode=]"rb")
#相对路径：直接写文件名，绝对路径：文件地址+文件名
#文件是什么编码存的，就应该用什么编码读取
```

#### 3 智能检测编码的工具
* Q: 假如你不知道你要处理的文件是什么编码怎么办？

```python
import chardet

f=open("log",mode="rb")
data=f.read()
f.close()

result = chardet.detect(open("log",mode="rb").read())
#result = chardet.detect(data)
print(result)
```

* 安装chardet:??????/

## 循环文件
* 语法
* 一次取一行，

```python
f = open("filename","r",encoding="utf-8")

for line in f:
  print(line)

f.close()
```

* Q:取出来的时候每行之间会有空行，why?
* 答：因为print本身会换行。

## 写
### 1 写文件
* 语法

```python
f = open('filename',mode='w',encoding='utf-8')
f.write("contens")
f.close()
```

* 举例

```python
f = open('D:\诗集\海子诗集.txt',mode='w',encoding='utf-8')
f.write("从明天起，做一个幸福的人")
f.close()
```

### 2 写文件(二进制模式)

* 语法
* 创建文件，在创建之前必须先去查询一下是否存在这个文件，否则会被覆盖

```python
f = open('filename',mode='wb')
f.write("contens".encode())
f.close()
```

* 举例：

```python
f = open('顾城.txt',mode='wb')
f.write("contens".encode('gbk'))
f.close()
```

## 追加
### 追加
* 把内容追加到文件尾部

```python
f = open('filename','a',encoding='')
f.write('contens')
f.close()
```

* 举例

```python
f = open('顾城.txt','a',encoding='utf-8')
f.write('你不愿意种花，你说，我不愿看见它一点点凋落。是的，为了避免结束，你避免了一切开始。')
f.close()
```

## 文件处理-混合操作文件
### 1 读写混合模式
* 1. r+ 语法

```python
f = open([file=]"路径+filename",[mode=]"r+",encoding='文件编码')
data = f.read()
print(data)
f.write("contens") #写内容
f.close()
```

* 举例

```python
f = open(file="海子.txt",mode="r+",encoding='utf-8')
data = f.read()#读取出之前的内容，光标随着内容移动，直到内容的最后一行
print(data)
f.write("喂马、劈柴、周游世界"，f.read()) #写内容，此处f.read()返回空白，因为光标已经到无内容那里了
f.close()
```

* 2. w+ 语法

```python
f = open([file=]"路径+filename",[mode=]"r+",encoding='文件编码')
data = f.read()
print(data)
f.write("contens") #写内容，原来的内容没了，只有写入的内容了
f.close()
```

## 文件操作其他功能
* f.flush() 把文件从内存buffer里强制刷到硬盘里
* f.readable 判断文件是否可读
* f.readline() 只读一行，遇到\r 或者 \n
* f.tell() 返回当前文件操作光标位置
* f.seek(num) 返回到文件操作光标位置
```
tell、seek： 字节记数，按照字节来算数的
read : 字符
```
* f.seekable() 判断文件是否可进行seek操作
* f.writable() 判断文件是否可写
* f.truncate() 从当前位置截断，(num)表示从头开始截取多少字节


## 文件修改
### 1 占硬盘不占内存方式

```python
f_name='海子.txt'
f_new_name="%s.new" %f_name

old_str = "刘亦菲"
new_str = "杨幂"

f=open(f_name,'r'，encod='urf-8')
f_new=open(f_new_name,'w'，encod='urf-8')

for line in f:
  if old_str in f_name：
    line = line.replace(old_str,new_str)
  f_new.write(line)
f.close()
f_new.close()
os.rename(f_new_name,f_name)
```

* 重命名
* 工具箱： os
* 实现了修改

### 2 占内存不占硬盘方式
* data=f.read()
* data.repalce()

  


```
